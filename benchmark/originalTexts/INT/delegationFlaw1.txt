Initially, userA and userC have no key. The cloudSmartThing records that the deviceSwitch is off, has the key 'secret', trusts cloudGoogle, and is bound to the deviceLock. The cloudGoogle records that the deviceSwitch has the key 'secret', is off, and trusts userA. The deviceLock trusts cloudSmartThing and is off, while the deviceSwitch is also off.

If the deviceLock is off and records any principal in its trust set, and the principal calls the API 'toggle' on the deviceLock, the deviceLock will turn on. When any cloud records that any principal is in any device's trust set, the device is off, and the principal calls the API 'toggle' on the device, the cloud will update the device's information to "on" and trigger an event that calls the API 'toggle' on the device. When the cloudSmartThing records that any device is bound to another device, and the cloud calls the API 'toggle' on the first device, the cloud will also call the API 'toggle' on the second device. If a user calls the API 'getKey' to any cloud, and the cloud records that the user is in any device's trust set and the device has a key, the cloud will transfer the key to the user. When any cloud sends a user a key, the user will know the key. Additionally, when a cloud records that a user is in a device's trust set, and the user calls the API 'delegate' to the cloud with a delegated user and the device, the cloud will add the delegated user to the device's trust set. If a cloud records that at least two users are in a device's trust set, and the first user calls the API 'revoke' to the cloud with the second user and the device, the cloud will remove the second user from the device's trust set. If the cloudSmartThing records that a device has a key, and a user calls the API 'provide' to the cloud with the device and the key, the cloud will add the user to the device's trust set.

Users can perform various actions. Any user can call the cloudGoogle's API 'getKey' with any device, call the API 'delegate' with another user and any device, or call the API 'revoke' with another user and any device. If a user knows a key, they can call the cloudSmartThing's API 'provide' with the device and the key. Additionally, any user can call the API 'toggle' on the deviceSwitch.

[properties]
The userA will always first call API 'delegate' to cloudGoogle, then call API 'revoke' to cloudGoogle.
After calling API 'revoke', in the next state userA will always not perform any operations.
In the meantime, the userC can perform any operations between or after the userA.
Eventually, there is a state that deviceLock is off, and the cloudGoogle records that deviceSwitch does not trust userC, and the next state userC performs some actions, the cloudGoogle records that deviceSwitch does not trust userC, and the deviceLock is on.
